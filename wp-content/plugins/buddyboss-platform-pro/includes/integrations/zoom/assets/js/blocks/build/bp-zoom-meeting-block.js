!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=7)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.wp.date}()},function(e,t,o){var n=o(8),i=o(9),r=o(10),a=o(12);e.exports=function(e,t){return n(e)||i(e,t)||r(e,t)||a()}},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t,o){"use strict";o.r(t),o.d(t,"isBuddyBossInCategories",(function(){return b})),o.d(t,"getMeetingBlocks",(function(){return m}));var n=o(4),i=o.n(n),r=o(0),a=o(1),s=o(5),c=o(6),d=o(3),l=o(2),b=function(){var e=wp.blocks.getCategories();for(var t in e)if("buddyboss"===e[t].slug)return!0;return!1},u=new Date(bpZoomMeetingBlock.wp_date_time);u.setMinutes(u.getMinutes()+(60-u.getMinutes())),Object(c.registerBlockType)("bp-zoom-meeting/create-meeting",{title:Object(a.__)("Zoom Meeting","buddyboss-pro"),description:Object(a.__)("Create meeting in Zoom","buddyboss-pro"),icon:"video-alt2",category:b()?"buddyboss":"common",attributes:{id:{type:"number",default:""},meetingId:{type:"number",default:""},hostId:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_id?bpZoomMeetingBlock.default_host_id:""},hostDisplayName:{type:"string",default:void 0!==bpZoomMeetingBlock.default_host_user?bpZoomMeetingBlock.default_host_user:""},alt_hosts:{type:"string",default:""},title:{type:"string",default:""},description:{type:"string",default:""},startDate:{type:"string",default:Object(d.dateI18n)("Y-m-d H:i:s",u)},duration:{type:"string",default:"30"},timezone:{type:"string",default:void 0!==bpZoomMeetingBlock.wp_timezone?bpZoomMeetingBlock.wp_timezone:""},password:{type:"string",default:""},registration:{type:"boolean",default:!1},hostVideo:{type:"boolean",default:!1},participantsVideo:{type:"boolean",default:!1},joinBeforeHost:{type:"boolean",default:!1},muteParticipants:{type:"boolean",default:!1},waitingRoom:{type:"boolean",default:!1},authentication:{type:"boolean",default:!1},autoRecording:{type:"string",default:"none"},meetingFormType:{type:"string",default:""},external_meeting:{type:"boolean",default:!1}},edit:function(e){var t=e.setAttributes,o=void 0!==bpZoomMeetingBlock.default_host_user_type?bpZoomMeetingBlock.default_host_user_type:1,n=e.attributes,c=n.meetingId,b=(n.hostId,n.hostDisplayName),u=n.title,m=n.description,p=n.startDate,g=n.duration,_=n.timezone,f=n.password,y=n.registration,h=n.hostVideo,j=n.participantsVideo,v=n.joinBeforeHost,O=n.muteParticipants,w=n.waitingRoom,C=n.authentication,x=n.autoRecording,k=n.meetingFormType,E=n.alt_hosts,z=n.external_meeting,M=function(e){e=e.toString().replace(/\s/g,""),t({meetingId:parseInt(e)})},B=function(e){t({hostId:e})},P=function(e){t({title:e})},N=function(e){t({description:e})},D=function(e){t({duration:e})},S=function(e){t({timezone:e})},T=function(e){t({password:e})},A=function(e){t({registration:e})},I=function(e){t({hostVideo:e})},Z=function(e){t({participantsVideo:e})},R=function(e){t({joinBeforeHost:e})},H=function(e){t({muteParticipants:e})},V=function(e){t({waitingRoom:e})},F=function(e){t({authentication:e})},L=function(e){t({autoRecording:e})},U=function(e){t({meetingFormType:e})},Q=function(e){t({alt_hosts:e})},Y=Object(d.__experimentalGetSettings)(),q=Object(r.useState)(!1),G=i()(q,2),W=G[0],$=G[1],J=Y.formats.datetime||"Y-m-d H:i:s",K=[];return K=2==o?[{label:Object(a.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(a.__)("Cloud","buddyboss-pro"),value:"cloud"},{label:Object(a.__)("Local","buddyboss-pro"),value:"local"}]:[{label:Object(a.__)("No Recordings","buddyboss-pro"),value:"none"},{label:Object(a.__)("Local","buddyboss-pro"),value:"local"}],Object(r.createElement)(r.Fragment,null,""===k?Object(r.createElement)(l.Placeholder,{icon:"video-alt2",className:"bb-input-container",label:Object(a.__)("Zoom Meeting","buddyboss-pro"),instructions:Object(a.__)("Create meeting or add existing meeting.","buddyboss-pro")},Object(r.createElement)(l.Button,{isSecondary:!0,onClick:function(){U("create")}},Object(a.__)("Create Meeting","buddyboss-pro")),Object(r.createElement)(l.Button,{isSecondary:!0,onClick:function(){U("existing")}},Object(a.__)("Add Existing Meeting","buddyboss-pro"))):"","existing"===k?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.Placeholder,{icon:"video-alt2",className:"bb-meeting-id-input-container",label:Object(a.__)("Add Existing Meeting","buddyboss-pro")},Object(r.createElement)(l.TextControl,{label:Object(a.__)("Meeting ID","buddyboss-pro"),value:c,className:"components-placeholder__input bb-meeting-id-wrap",placeholder:Object(a.__)("Enter meeting ID without spacesâ€¦","buddyboss-pro"),onChange:M}),Object(r.createElement)(l.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(l.Button,{isPrimary:!0,onClick:function(e){var o=e.target;o.setAttribute("disabled",!0);var n={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-id":c};wp.ajax.send("zoom_meeting_update_in_site",{data:n,success:function(e){if(o.removeAttribute("disabled"),void 0!==e.meeting&&8==e.meeting.type)return wp.data.dispatch("core/notices").createNotice("error",Object(a.__)("This is a recurring Zoom meeting, which we do not yet support. Please enter a different meeting ID.","buddyboss-pro"),{isDismissible:!0}),!1;var n;wp.data.dispatch("core/notices").createNotice("success",Object(a.__)("Meeting Updated.","buddyboss-pro"),{isDismissible:!0}),void 0!==e.host_name&&(n=e.host_name,t({hostDisplayName:n})),void 0!==e.host_email&&B(e.host_email),void 0!==e.meeting&&(void 0!==e.meeting.id&&M(e.meeting.id),void 0!==e.meeting.host_id&&B(e.meeting.host_id),void 0!==e.meeting.topic&&P(e.meeting.topic),void 0!==e.meeting.agenda&&N(e.meeting.agenda),void 0!==e.meeting.timezone&&S(e.meeting.timezone),void 0!==e.meeting.start_time&&t({startDate:e.meeting.start_time}),void 0!==e.meeting.duration&&D(e.meeting.duration),void 0!==e.meeting.password&&T(e.meeting.password),void 0!==e.meeting.settings&&(void 0!==e.meeting.settings.alternative_hosts&&Q(e.meeting.settings.alternative_hosts),void 0!==e.meeting.settings.approval_type&&0==e.meeting.settings.approval_type&&A(!0),void 0!==e.meeting.settings.host_video&&I(e.meeting.settings.host_video),void 0!==e.meeting.settings.participants_video&&Z(e.meeting.settings.participants_video),void 0!==e.meeting.settings.join_before_host&&R(e.meeting.settings.join_before_host),void 0!==e.meeting.settings.mute_participants&&H(e.meeting.settings.mute_participants),void 0!==e.meeting.settings.waiting_room&&V(e.meeting.settings.waiting_room),void 0!==e.meeting.settings.meeting_authentication&&F(e.meeting.settings.meeting_authentication),void 0!==e.meeting.settings.auto_recording&&L(e.meeting.settings.auto_recording))),U("create"),function(e){t({external_meeting:e})}(!0);var i=wp.data.select("core/editor");i.isEditedPostSaveable()&&(!i.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(i.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){o.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(a.__)("Save","buddyboss-pro")),c<1||""===c?Object(r.createElement)(l.Button,{isTertiary:!0,onClick:function(){U("")}},Object(a.__)("Cancel","buddyboss-pro")):""))):"","create"===k?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l.Placeholder,{icon:"video-alt2",label:z?Object(a.__)("Existing Meeting","buddyboss-pro"):Object(a.__)("Create Meeting","buddyboss-pro"),className:"bp-meeting-block-create"},Object(r.createElement)(l.TextControl,{label:"",type:"hidden",value:c}),Object(r.createElement)(l.TextControl,{label:Object(a.__)("Title","buddyboss-pro"),value:u,onChange:P}),Object(r.createElement)(l.BaseControl,{label:Object(a.__)("When","buddyboss-pro"),className:"bb-meeting-time-wrap"},Object(r.createElement)("time",{dateTime:Object(d.dateI18n)("c",p)},Object(r.createElement)(l.Button,{icon:"edit",isTertiary:!0,isLink:!0,onClick:function(){return $((function(e){return!e}))}},Object(d.dateI18n)(J,p)),W&&Object(r.createElement)(l.Popover,{onClose:$.bind(null,!1)},Object(r.createElement)(l.DateTimePicker,{currentDate:p,onChange:function(e){var o=new Date(bpZoomMeetingBlock.wp_date_time),n=new Date(e);o.getTime()<n.getTime()&&t({startDate:e})},is12Hour:!0})))),Object(r.createElement)(l.SelectControl,{label:Object(a.__)("Timezone","buddyboss-pro"),value:_,options:bpZoomMeetingBlock.timezones,onChange:S}),Object(r.createElement)(l.SelectControl,{label:Object(a.__)("Auto Recording","buddyboss-pro"),value:x,options:K,onChange:L}),Object(r.createElement)(l.BaseControl,{className:"bb-buttons-wrap"},Object(r.createElement)(l.Button,{className:"submit-meeting",isPrimary:!0,onClick:function(e){var t=e.target;t.setAttribute("disabled",!0);var o={_wpnonce:bpZoomMeetingBlock.bp_zoom_meeting_nonce,"bp-zoom-meeting-zoom-id":c,"bp-zoom-meeting-start-date":p,"bp-zoom-meeting-timezone":_,"bp-zoom-meeting-duration":g,"bp-zoom-meeting-password":f,"bp-zoom-meeting-recording":x,"bp-zoom-meeting-alt-host-ids":E,"bp-zoom-meeting-title":u,"bp-zoom-meeting-description":m,"bp-zoom-meeting-type":2};y&&(o["bp-zoom-meeting-registration"]=1),v&&(o["bp-zoom-meeting-join-before-host"]=1),h&&(o["bp-zoom-meeting-host-video"]=1),j&&(o["bp-zoom-meeting-participants-video"]=1),O&&(o["bp-zoom-meeting-mute-participants"]=1),w&&(o["bp-zoom-meeting-waiting-room"]=1),C&&(o["bp-zoom-meeting-authentication"]=1),wp.ajax.send("zoom_meeting_block_add",{data:o,success:function(e){var o=wp.data.select("core/editor");e.meeting.id&&M(e.meeting.id),t.removeAttribute("disabled"),wp.data.dispatch("core/notices").createNotice("success",Object(a.__)("Meeting Updated.","buddyboss-pro"),{isDismissible:!0}),U("create"),o.isEditedPostSaveable()&&(!o.isCurrentPostPublished()&&~["draft","auto-draft"].indexOf(o.getEditedPostAttribute("status"))?wp.data.dispatch("core/editor").autosave():wp.data.dispatch("core/editor").savePost())},error:function(e){if(t.removeAttribute("disabled"),void 0!==e.errors)for(var o in e.errors)wp.data.dispatch("core/notices").createNotice("error",e.errors[o].message,{isDismissible:!0});else wp.data.dispatch("core/notices").createNotice("error",e.error,{isDismissible:!0})}})}},Object(a.__)("Save Meeting","buddyboss-pro")),c<1||""===c?Object(r.createElement)(l.Button,{isTertiary:!0,onClick:function(){U("")}},Object(a.__)("Cancel","buddyboss-pro")):""))):"","create"===k?Object(r.createElement)(s.InspectorControls,null,Object(r.createElement)(l.PanelBody,{title:Object(a.__)("Settings","buddyboss-pro"),initialOpen:!0},Object(r.createElement)(l.TextareaControl,{label:Object(a.__)("Description (optional)","buddyboss-pro"),value:m,onChange:N}),Object(r.createElement)(l.TextControl,{label:Object(a.__)("Password (optional)","buddyboss-pro"),onChange:T,value:f}),Object(r.createElement)(l.TextControl,{type:"number",label:Object(a.__)("Duration (minutes)","buddyboss-pro"),onChange:D,value:g}),Object(r.createElement)(l.TextControl,{label:Object(a.__)("Default Host","buddyboss-pro"),type:"text",disabled:!0,value:b}),2==o?Object(r.createElement)(l.TextControl,{label:Object(a.__)("Alternative Hosts","buddyboss-pro"),onChange:Q,value:E,placeholder:Object(a.__)("Example: mary@company.com","buddyboss-pro"),help:Object(a.__)("Entered by email, comma separated. Each email added needs to match with a user in your Zoom account.","buddyboss-pro")}):"",Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Start video when host joins","buddyboss-pro"),checked:h,onChange:I,className:"bb-checkbox-wrap"}),Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Start video when participants join","buddyboss-pro"),checked:j,onChange:Z,className:"bb-checkbox-wrap"}),2==o?Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Require Registration","buddyboss-pro"),checked:y,onChange:A,className:"bb-checkbox-wrap"}):"",Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Enable join before host","buddyboss-pro"),checked:v,onChange:R,className:"bb-checkbox-wrap"}),Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Mute participants upon entry","buddyboss-pro"),checked:O,onChange:H,className:"bb-checkbox-wrap"}),Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Enable waiting room","buddyboss-pro"),checked:w,onChange:V,className:"bb-checkbox-wrap"}),Object(r.createElement)(l.CheckboxControl,{label:Object(a.__)("Only authenticated users can join","buddyboss-pro"),checked:C,onChange:F,className:"bb-checkbox-wrap"}))):"")}});var m=function(){var e=wp.data.select("core/block-editor").getBlocks(),t=[],o=0;for(o in e)e[o].isValid&&"bp-zoom-meeting/create-meeting"===e[o].name&&t.push(e[o]);return t};wp.domReady((function(){jQuery(document).on("click",".editor-post-publish-button",(function(e){e.stopPropagation(),e.preventDefault();var t=m();if(t.length)for(var o in t)jQuery("#block-"+t[o].clientId).find(".submit-meeting").trigger("click")}))}))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(o.push(a.value),!t||o.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return o}}},function(e,t,o){var n=o(11);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}]);